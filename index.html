<!doctype html>
<html class="default" lang="en" data-base="./">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="IE=edge" />
    <title>@embra/reactivity - v0.0.4</title>
    <meta name="description" content="Documentation for @embra/reactivity" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="assets/style.css" />
    <link rel="stylesheet" href="assets/highlight.css" />
    <link rel="stylesheet" href="assets/custom.css" />
    <script defer src="assets/main.js"></script>
    <script async src="assets/icons.js" id="tsd-icons-script"></script>
    <script async src="assets/search.js" id="tsd-search-script"></script>
    <script async src="assets/navigation.js" id="tsd-nav-script"></script>
    <script async src="assets/hierarchy.js" id="tsd-hierarchy-script"></script>
  </head>
  <body>
    <script>
      document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";
      document.body.style.display = "none";
      setTimeout(() => (window.app ? app.showPage() : document.body.style.removeProperty("display")), 500);
    </script>
    <header class="tsd-page-toolbar">
      <div class="tsd-toolbar-contents container">
        <a href="index.html" class="title">@embra/reactivity - v0.0.4</a>
        <div id="tsd-toolbar-links"></div>
        <button id="tsd-search-trigger" class="tsd-widget" aria-label="Search">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true">
            <use href="assets/icons.svg#icon-search"></use>
          </svg>
        </button>
        <dialog id="tsd-search" aria-label="Search">
          <input
            role="combobox"
            id="tsd-search-input"
            aria-controls="tsd-search-results"
            aria-autocomplete="list"
            aria-expanded="true"
            autocapitalize="off"
            autocomplete="off"
            placeholder="Search the docs"
            maxlength="100"
          />
          <ul role="listbox" id="tsd-search-results"></ul>
          <div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div>
        </dialog>
        <a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"
          ><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true">
            <use href="assets/icons.svg#icon-menu"></use></svg
        ></a>
      </div>
    </header>
    <div class="container container-main">
      <div class="col-content">
        <div class="tsd-page-title"><h1>@embra/reactivity - v0.0.4</h1></div>
        <div class="tsd-panel tsd-typography">
          <h1 id="embrareactivity" class="tsd-anchor-link">
            <a href="https://github.com/embrajs/reactivity">@embra/reactivity</a
            ><a href="#embrareactivity" aria-label="Permalink" class="tsd-anchor-icon"
              ><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg
            ></a>
          </h1>
          <p align="center">
            <img width="200" src="https://raw.githubusercontent.com/embrajs/reactivity/main/assets/embra.svg" />
          </p>
          <p>
            <a href="https://embrajs.github.io/reactivity"
              ><img src="https://img.shields.io/badge/Docs-read-%23fdf9f5" alt="Docs"
            /></a>
            <a href="https://github.com/embrajs/reactivity/actions/workflows/build.yml"
              ><img
                src="https://github.com/embrajs/reactivity/actions/workflows/build.yml/badge.svg"
                alt="Build Status"
            /></a>
            <a href="https://www.npmjs.com/package/@embra/reactivity"
              ><img src="https://img.shields.io/npm/v/@embra/reactivity.svg" alt="npm-version"
            /></a>
            <a href="https://embrajs.github.io/reactivity/coverage/"
              ><img
                src="https://embrajs.github.io/reactivity/coverage-badges/@embra/reactivity.svg"
                alt="Coverage Status"
            /></a>
          </p>
          <p>A lightweight, composable and explicit reactivity system.</p>
          <h2 id="features" class="tsd-anchor-link">
            Features<a href="#features" aria-label="Permalink" class="tsd-anchor-icon"
              ><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg
            ></a>
          </h2>
          <h3 id="‚ö°-plain-reactivity-no-proxies-no-magic" class="tsd-anchor-link">
            ‚ö° Plain reactivity. No proxies, no magic.<a
              href="#‚ö°-plain-reactivity-no-proxies-no-magic"
              aria-label="Permalink"
              class="tsd-anchor-icon"
              ><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg
            ></a>
          </h3>
          <p>
            It does not convert the value with <code>Object.defineProperty</code> nor <code>Proxy</code>. Keeping
            everything as plain JavaScript value makes it easier to work with other libraries and easier for the
            JavaScript engine to optimize.
          </p>
          <pre><code class="ts"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">writable</span><span class="hl-1">, </span><span class="hl-2">readable</span><span class="hl-1">, </span><span class="hl-0">type</span><span class="hl-1"> </span><span class="hl-2">Readable</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;@embra/reactivity&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">count$</span><span class="hl-1"> = </span><span class="hl-6">writable</span><span class="hl-1">(</span><span class="hl-7">0</span><span class="hl-1">);</span><br/><span class="hl-2">count$</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">(</span><span class="hl-7">1</span><span class="hl-1">);</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> [</span><span class="hl-5">count2$</span><span class="hl-1">, </span><span class="hl-5">setCount</span><span class="hl-1">] = </span><span class="hl-6">readable</span><span class="hl-1">(</span><span class="hl-7">0</span><span class="hl-1">);</span><br/><span class="hl-6">setCount</span><span class="hl-1">(</span><span class="hl-7">1</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

          <h3 id="üîç-explicit-reactivity-no-hidden-dependencies-no-surprises" class="tsd-anchor-link">
            üîç Explicit reactivity. No hidden dependencies, no surprises.<a
              href="#üîç-explicit-reactivity-no-hidden-dependencies-no-surprises"
              aria-label="Permalink"
              class="tsd-anchor-icon"
              ><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg
            ></a>
          </h3>
          <p>
            Unlike signal-based libraries, <code>@embra/reactivity</code> does not automatically track dependencies. You
            explicitly define what to watch and how to react to changes. This is easier to reason about dependencies and
            also reduce the cost of complex implicit dependency calculation.
          </p>
          <p>
            With React hook-like API, computations can be pure functions which is more compatible with general
            non-reactive functions.
          </p>
          <pre><code class="ts"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">writable</span><span class="hl-1">, </span><span class="hl-2">derive</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;@embra/reactivity&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">count$</span><span class="hl-1"> = </span><span class="hl-6">writable</span><span class="hl-1">(</span><span class="hl-7">0</span><span class="hl-1">);</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">isPositive</span><span class="hl-1"> = (</span><span class="hl-2">value</span><span class="hl-1">: </span><span class="hl-8">number</span><span class="hl-1">): </span><span class="hl-8">boolean</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">value</span><span class="hl-1"> &gt; </span><span class="hl-7">0</span><span class="hl-1">;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">positiveCount$</span><span class="hl-1"> = </span><span class="hl-6">derive</span><span class="hl-1">(</span><span class="hl-2">count$</span><span class="hl-1">, </span><span class="hl-2">isPositive</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

          <p>
            Dynamic dependencies can be collected using <code>get</code> in <code>compute</code> or <code>watch</code>.
          </p>
          <pre><code class="ts"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">writable</span><span class="hl-1">, </span><span class="hl-2">compute</span><span class="hl-1">, </span><span class="hl-2">watch</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;@embra/reactivity&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">count$</span><span class="hl-1"> = </span><span class="hl-6">writable</span><span class="hl-1">(</span><span class="hl-7">0</span><span class="hl-1">);</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">doubleCount$</span><span class="hl-1"> = </span><span class="hl-6">compute</span><span class="hl-1">(</span><span class="hl-2">get</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-6">get</span><span class="hl-1">(</span><span class="hl-2">count$</span><span class="hl-1">) * </span><span class="hl-7">2</span><span class="hl-1">);</span><br/><br/><span class="hl-6">watch</span><span class="hl-1">(</span><span class="hl-2">get</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">count</span><span class="hl-1"> = </span><span class="hl-6">get</span><span class="hl-1">(</span><span class="hl-2">count$</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-3">`Count is </span><span class="hl-4">${</span><span class="hl-2">count</span><span class="hl-4">}</span><span class="hl-3">, double is </span><span class="hl-4">${</span><span class="hl-6">get</span><span class="hl-9">(</span><span class="hl-2">doubleCount$</span><span class="hl-9">)</span><span class="hl-4">}</span><span class="hl-3">`</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

          <h3 id="üõ°Ô∏è-zero-cost-ownership-model-type-safe-lifecycle-management" class="tsd-anchor-link">
            üõ°Ô∏è Zero-cost ownership model. Type-safe lifecycle management.<a
              href="#üõ°Ô∏è-zero-cost-ownership-model-type-safe-lifecycle-management"
              aria-label="Permalink"
              class="tsd-anchor-icon"
              ><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg
            ></a>
          </h3>
          <p>
            In practice, one of the biggest problems we encountered with reactivity libraries is the lifecycle
            management of reactive values. In <code>@embra/reactivity</code>, the reactive dependencies are weakly
            referenced, so generally you don't need to manually dispose of them. However, explicit lifecycle management
            is still a good practice to avoid unexpected behaviors.
          </p>
          <p>
            <code>@embra/reactivity</code> provides a zero-cost ownership model that allows you to create reactive
            values with explicit ownership.
          </p>
          <p>
            By default, created reactive values are with type <code>OwnedReadable</code> or <code>OwnedWritable</code>,
            which exposes a <code>dispose()</code> method to clear their subscribers. When passing the reactive value to
            other modules, you can use <code>Readable</code> or <code>Writable</code> types to hide the
            <code>dispose()</code> method, ensuring that the value is not disposed of accidentally.
          </p>
          <pre><code class="ts"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">writable</span><span class="hl-1">, </span><span class="hl-2">readable</span><span class="hl-1">, </span><span class="hl-0">type</span><span class="hl-1"> </span><span class="hl-2">Readable</span><span class="hl-1">, </span><span class="hl-0">type</span><span class="hl-1"> </span><span class="hl-2">OwnedWritable</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;@embra/reactivity&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">count$</span><span class="hl-1">: </span><span class="hl-8">OwnedWritable</span><span class="hl-1">&lt;</span><span class="hl-8">number</span><span class="hl-1">&gt; = </span><span class="hl-6">writable</span><span class="hl-1">(</span><span class="hl-7">0</span><span class="hl-1">);</span><br/><span class="hl-2">count$</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">(</span><span class="hl-7">1</span><span class="hl-1">);</span><br/><br/><span class="hl-10">// Hide the setter by typing</span><br/><span class="hl-4">function</span><span class="hl-1"> </span><span class="hl-6">logCount</span><span class="hl-1">(</span><span class="hl-2">count$</span><span class="hl-1">: </span><span class="hl-8">Readable</span><span class="hl-1">&lt;</span><span class="hl-8">number</span><span class="hl-1">&gt;) {</span><br/><span class="hl-1">  </span><span class="hl-2">count$</span><span class="hl-1">.</span><span class="hl-6">subscribe</span><span class="hl-1">(</span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-2">log</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><span class="hl-10">// @ts-expect-error</span><br/><span class="hl-1">  </span><span class="hl-2">count$</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">(</span><span class="hl-7">2</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><span class="hl-6">logCount</span><span class="hl-1">(</span><span class="hl-2">count$</span><span class="hl-1">);</span><br/><br/><span class="hl-10">// Hide the setter in runtime</span><br/><span class="hl-4">const</span><span class="hl-1"> [</span><span class="hl-5">count2$</span><span class="hl-1">, </span><span class="hl-5">setCount</span><span class="hl-1">] = </span><span class="hl-6">readable</span><span class="hl-1">(</span><span class="hl-7">0</span><span class="hl-1">);</span><br/><span class="hl-6">setCount</span><span class="hl-1">(</span><span class="hl-7">1</span><span class="hl-1">);</span><br/><br/><span class="hl-10">// @ts-expect-error</span><br/><span class="hl-2">count2$</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">(</span><span class="hl-7">2</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

          <h3 id="üß©-flexible-abstractions-of-state-and-actions" class="tsd-anchor-link">
            üß© Flexible abstractions of state and actions.<a
              href="#üß©-flexible-abstractions-of-state-and-actions"
              aria-label="Permalink"
              class="tsd-anchor-icon"
              ><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg
            ></a>
          </h3>
          <p>
            In the days of Flux reducer model, we often used a single store to hold the state and actions to mutate the
            state. This was nice for reasoning about the state, but it also introduced a lot of boilerplate code.
          </p>
          <p>
            Later on, a pattern with state and action glued together was introduced, like <code>redux-actions</code>.
            <code>@embra/reactivity</code> takes this a step further by providing a simple and flexible abstraction of
            state and actions.
          </p>
          <p>
            In the following example, we create a Writable <code>count$</code> which looks like a
            <code>Writable&lt;number&gt;</code>, but internally it is derived from a larger application state
            <code>appState$</code>. This allows other modules to depend on a <code>Writable&lt;number&gt;</code> without
            knowing the details of the application state.
          </p>
          <pre><code class="ts"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">writable</span><span class="hl-1">, </span><span class="hl-2">derive</span><span class="hl-1">, </span><span class="hl-2">toWritable</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;@embra/reactivity&quot;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">trace</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;@embra/reactivity/debug&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">appState$</span><span class="hl-1"> = </span><span class="hl-6">writable</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-2">count:</span><span class="hl-1"> </span><span class="hl-7">0</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">user:</span><span class="hl-1"> </span><span class="hl-4">null</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">count$</span><span class="hl-1"> = </span><span class="hl-6">toWritable</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-6">derive</span><span class="hl-1">(</span><span class="hl-2">appState$</span><span class="hl-1">, </span><span class="hl-2">state</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">state</span><span class="hl-1">.</span><span class="hl-2">count</span><span class="hl-1">),</span><br/><span class="hl-1">  </span><span class="hl-2">count</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">appState$</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">({ ...</span><span class="hl-2">appState$</span><span class="hl-1">.</span><span class="hl-2">value</span><span class="hl-1">, </span><span class="hl-2">count</span><span class="hl-1"> }),</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-10">// when debugging, you can trace the reactive value</span><br/><span class="hl-6">trace</span><span class="hl-1">(</span><span class="hl-2">count$</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

          <h3 id="‚è≥-scheduler-mechanism-for-controlled-updates" class="tsd-anchor-link">
            ‚è≥ Scheduler mechanism for controlled updates.<a
              href="#‚è≥-scheduler-mechanism-for-controlled-updates"
              aria-label="Permalink"
              class="tsd-anchor-icon"
              ><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg
            ></a>
          </h3>
          <p>
            <code>@embra/reactivity</code> includes a scheduler mechanism and built-in schedulers that lets you control
            when reactive updates are processed. This is useful for batching updates and deferring computations.
          </p>
          <pre><code class="ts"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">writable</span><span class="hl-1">, </span><span class="hl-2">MicrotaskScheduler</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;@embra/reactivity&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">rapidChangeCount$</span><span class="hl-1"> = </span><span class="hl-6">writable</span><span class="hl-1">(</span><span class="hl-7">0</span><span class="hl-1">);</span><br/><br/><span class="hl-2">rapidChangeCount$</span><span class="hl-1">.</span><span class="hl-6">reaction</span><span class="hl-1">(</span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-2">log</span><span class="hl-1">, </span><span class="hl-2">MicrotaskScheduler</span><span class="hl-1">);</span><br/><br/><span class="hl-2">count$</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">(</span><span class="hl-7">1</span><span class="hl-1">);</span><br/><span class="hl-2">count$</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">(</span><span class="hl-7">2</span><span class="hl-1">);</span><br/><br/><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-8">Promise</span><span class="hl-1">.</span><span class="hl-6">resolve</span><span class="hl-1">();</span><br/><span class="hl-10">// Logs &quot;2&quot; once after a microtask tick, reducing unnecessary computations.</span>
</code><button type="button">Copy</button></pre>

          <p>You can also provide your owned custom scheduler function easily.</p>
          <pre><code class="ts"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">writable</span><span class="hl-1">, </span><span class="hl-2">asyncScheduler</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;@embra/reactivity&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">MicrotaskScheduler</span><span class="hl-1"> = </span><span class="hl-6">asyncScheduler</span><span class="hl-1">(</span><span class="hl-2">flush</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-8">Promise</span><span class="hl-1">.</span><span class="hl-6">resolve</span><span class="hl-1">().</span><span class="hl-6">then</span><span class="hl-1">(</span><span class="hl-2">flush</span><span class="hl-1">));</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">AnimationFrameScheduler</span><span class="hl-1"> = </span><span class="hl-6">asyncScheduler</span><span class="hl-1">(</span><span class="hl-2">requestAnimationFrame</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

          <h3 id="üèóÔ∏è-framework-agnostic-first-class-support-for-react" class="tsd-anchor-link">
            üèóÔ∏è Framework agnostic. First-class support for React.<a
              href="#üèóÔ∏è-framework-agnostic-first-class-support-for-react"
              aria-label="Permalink"
              class="tsd-anchor-icon"
              ><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg
            ></a>
          </h3>
          <p>
            <code>@embra/reactivity</code> is designed to be framework agnostic. It can be used with any framework or
            library that supports JavaScript. It also provides first-class support for React.
          </p>
          <ul>
            <li>
              Reactive values as component props are just simpler and more efficient.
              <ul>
                <li><code>value</code> = <code>Readable</code></li>
                <li><code>value</code> + <code>onChange</code> = <code>Writable</code></li>
                <li>
                  <code>state</code> + <code>action</code> =
                  <code>toWritable(derive(rootState$, selector), action)</code> (See
                  <a href="#-flexible-abstractions-of-state-and-actions">State and Actions</a>)
                </li>
              </ul>
            </li>
            <li>
              A lot of re-renderings can be avoided when passing reactive values down the props. You only need to
              subscribe to the reactive values that are actually used in the component.
            </li>
          </ul>
          <pre><code class="tsx"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">writable</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;@embra/reactivity&quot;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">useValue</span><span class="hl-1">, </span><span class="hl-2">useDerived</span><span class="hl-1">, </span><span class="hl-2">useCombined</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;@embra/reactivity/react&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">count$</span><span class="hl-1"> = </span><span class="hl-6">writable</span><span class="hl-1">(</span><span class="hl-7">0</span><span class="hl-1">);</span><br/><br/><span class="hl-4">function</span><span class="hl-1"> </span><span class="hl-6">Counter</span><span class="hl-1">({ </span><span class="hl-2">count$</span><span class="hl-1"> }) {</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">count</span><span class="hl-1"> = </span><span class="hl-6">useValue</span><span class="hl-1">(</span><span class="hl-2">count$</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">countDouble</span><span class="hl-1"> = </span><span class="hl-6">useDerived</span><span class="hl-1">(</span><span class="hl-2">count$</span><span class="hl-1">, </span><span class="hl-2">count</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-2">count</span><span class="hl-1"> * </span><span class="hl-7">2</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-0">return</span><span class="hl-1"> (</span><br/><span class="hl-1">    </span><span class="hl-11">&lt;</span><span class="hl-12">div</span><span class="hl-11">&gt;</span><br/><span class="hl-1">      </span><span class="hl-11">&lt;</span><span class="hl-12">button</span><span class="hl-1"> </span><span class="hl-13">onClick</span><span class="hl-1">=</span><span class="hl-4">{</span><span class="hl-9">() </span><span class="hl-4">=&gt;</span><span class="hl-9"> </span><span class="hl-2">count$</span><span class="hl-9">.</span><span class="hl-6">set</span><span class="hl-9">(</span><span class="hl-2">count</span><span class="hl-9"> </span><span class="hl-1">-</span><span class="hl-9"> </span><span class="hl-7">1</span><span class="hl-9">)</span><span class="hl-4">}</span><span class="hl-11">&gt;</span><span class="hl-1">-</span><span class="hl-11">&lt;/</span><span class="hl-12">button</span><span class="hl-11">&gt;</span><br/><span class="hl-1">      </span><span class="hl-11">&lt;</span><span class="hl-12">span</span><span class="hl-11">&gt;</span><span class="hl-4">{</span><span class="hl-2">count</span><span class="hl-4">}</span><span class="hl-11">&lt;/</span><span class="hl-12">span</span><span class="hl-11">&gt;</span><br/><span class="hl-1">      </span><span class="hl-11">&lt;</span><span class="hl-12">button</span><span class="hl-1"> </span><span class="hl-13">onClick</span><span class="hl-1">=</span><span class="hl-4">{</span><span class="hl-9">() </span><span class="hl-4">=&gt;</span><span class="hl-9"> </span><span class="hl-2">count$</span><span class="hl-9">.</span><span class="hl-6">set</span><span class="hl-9">(</span><span class="hl-2">count</span><span class="hl-9"> </span><span class="hl-1">+</span><span class="hl-9"> </span><span class="hl-7">1</span><span class="hl-9">)</span><span class="hl-4">}</span><span class="hl-11">&gt;</span><span class="hl-1">+</span><span class="hl-11">&lt;/</span><span class="hl-12">button</span><span class="hl-11">&gt;</span><br/><span class="hl-1">      </span><span class="hl-11">&lt;</span><span class="hl-12">span</span><span class="hl-11">&gt;</span><span class="hl-4">{</span><span class="hl-2">countDouble</span><span class="hl-4">}</span><span class="hl-11">&lt;/</span><span class="hl-12">span</span><span class="hl-11">&gt;</span><br/><span class="hl-1">    </span><span class="hl-11">&lt;/</span><span class="hl-12">div</span><span class="hl-11">&gt;</span><br/><span class="hl-1">  );</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

          <h3 id="üì¶-small-bundle-size-focused-on-performance-and-simplicity" class="tsd-anchor-link">
            üì¶ Small bundle size. Focused on performance and simplicity.<a
              href="#üì¶-small-bundle-size-focused-on-performance-and-simplicity"
              aria-label="Permalink"
              class="tsd-anchor-icon"
              ><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg
            ></a>
          </h3>
          <p><img src="https://embrajs.github.io/reactivity/assets/export-size.svg" alt="export size" /></p>
          <h2 id="install" class="tsd-anchor-link">
            Install<a href="#install" aria-label="Permalink" class="tsd-anchor-icon"
              ><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg
            ></a>
          </h2>
          <pre><code class="bash"><span class="hl-6">npm</span><span class="hl-1"> </span><span class="hl-3">add</span><span class="hl-1"> </span><span class="hl-3">@embra/reactivity</span>
</code><button type="button">Copy</button></pre>

          <h2 id="debugging" class="tsd-anchor-link">
            Debugging<a href="#debugging" aria-label="Permalink" class="tsd-anchor-icon"
              ><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg
            ></a>
          </h2>
          <h3 id="trace" class="tsd-anchor-link">
            trace<a href="#trace" aria-label="Permalink" class="tsd-anchor-icon"
              ><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg
            ></a>
          </h3>
          <p>
            <code>@embra/reactivity</code> provides a <code>trace()</code> function to help debug reactive values and
            watches. It tracks value and dependency changes and logs them to the console.
          </p>
          <pre><code class="js"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">writable</span><span class="hl-1">, </span><span class="hl-2">watch</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;@embra/reactivity&quot;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">trace</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;@embra/reactivity/debug&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">count$</span><span class="hl-1"> = </span><span class="hl-6">writable</span><span class="hl-1">(</span><span class="hl-7">0</span><span class="hl-1">);</span><br/><br/><span class="hl-10">// trace a reactive value</span><br/><span class="hl-6">trace</span><span class="hl-1">(</span><span class="hl-2">count$</span><span class="hl-1">);</span><br/><br/><span class="hl-10">// trace a watch function</span><br/><span class="hl-6">watch</span><span class="hl-1">(</span><span class="hl-6">trace</span><span class="hl-1">(</span><span class="hl-2">get</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-6">get</span><span class="hl-1">(</span><span class="hl-2">count$</span><span class="hl-1">)));</span><br/><br/><span class="hl-2">count$</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">(</span><span class="hl-7">1</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

          <h3 id="chrome-devtools-custom-formatter" class="tsd-anchor-link">
            Chrome Devtools Custom Formatter<a
              href="#chrome-devtools-custom-formatter"
              aria-label="Permalink"
              class="tsd-anchor-icon"
              ><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg
            ></a>
          </h3>
          <p>
            <code>@embra/reactivity</code> supports Chrome DevTools
            <a href="https://www.mattzeunert.com/2016/02/19/custom-chrome-devtools-object-formatters.html"
              >custom formatters</a
            >. You may enable it by checking the &quot;Enable custom formatters&quot; option in the &quot;Console&quot;
            section of DevTools general settings.
          </p>
          <p>
            It is enabled in development by default. You can also enable it manually by calling
            <code>customFormatter()</code>.
          </p>
          <pre><code class="js"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">customFormatter</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;@embra/reactivity/debug&quot;</span><span class="hl-1">;</span><br/><span class="hl-6">customFormatter</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>
        </div>
      </div>
      <div class="col-sidebar">
        <div class="page-menu">
          <div class="tsd-navigation settings">
            <details class="tsd-accordion">
              <summary class="tsd-accordion-summary">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                  <use href="assets/icons.svg#icon-chevronDown"></use>
                </svg>
                <h3>Settings</h3>
              </summary>
              <div class="tsd-accordion-details">
                <div class="tsd-theme-toggle">
                  <label class="settings-label" for="tsd-theme">Theme</label
                  ><select id="tsd-theme">
                    <option value="os">OS</option>
                    <option value="light">Light</option>
                    <option value="dark">Dark</option>
                  </select>
                </div>
              </div>
            </details>
          </div>
          <details open class="tsd-accordion tsd-page-navigation">
            <summary class="tsd-accordion-summary">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <use href="assets/icons.svg#icon-chevronDown"></use>
              </svg>
              <h3>On This Page</h3>
            </summary>
            <div class="tsd-accordion-details">
              <a href="#embrareactivity"><span>@embra/reactivity</span></a>
              <ul>
                <li>
                  <a href="#features"><span>Features</span></a>
                </li>
                <li>
                  <ul>
                    <li>
                      <a href="#‚ö°-plain-reactivity-no-proxies-no-magic"
                        ><span>‚ö° <wbr />Plain reactivity. <wbr />No proxies, no magic.</span></a
                      >
                    </li>
                    <li>
                      <a href="#üîç-explicit-reactivity-no-hidden-dependencies-no-surprises"
                        ><span>üîç <wbr />Explicit reactivity. <wbr />No hidden dependencies, no surprises.</span></a
                      >
                    </li>
                    <li>
                      <a href="#üõ°Ô∏è-zero-cost-ownership-model-type-safe-lifecycle-management"
                        ><span
                          >üõ°Ô∏è <wbr />Zero-<wbr />cost ownership model. <wbr />Type-<wbr />safe lifecycle
                          management.</span
                        ></a
                      >
                    </li>
                    <li>
                      <a href="#üß©-flexible-abstractions-of-state-and-actions"
                        ><span>üß© <wbr />Flexible abstractions of state and actions.</span></a
                      >
                    </li>
                    <li>
                      <a href="#‚è≥-scheduler-mechanism-for-controlled-updates"
                        ><span>‚è≥ <wbr />Scheduler mechanism for controlled updates.</span></a
                      >
                    </li>
                    <li>
                      <a href="#üèóÔ∏è-framework-agnostic-first-class-support-for-react"
                        ><span
                          >üèóÔ∏è <wbr />Framework agnostic. <wbr />First-<wbr />class support for <wbr />React.</span
                        ></a
                      >
                    </li>
                    <li>
                      <a href="#üì¶-small-bundle-size-focused-on-performance-and-simplicity"
                        ><span>üì¶ <wbr />Small bundle size. <wbr />Focused on performance and simplicity.</span></a
                      >
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="#install"><span>Install</span></a>
                </li>
                <li>
                  <a href="#debugging"><span>Debugging</span></a>
                </li>
                <li>
                  <ul>
                    <li>
                      <a href="#trace"><span>trace</span></a>
                    </li>
                    <li>
                      <a href="#chrome-devtools-custom-formatter"
                        ><span>Chrome <wbr />Devtools <wbr />Custom <wbr />Formatter</span></a
                      >
                    </li>
                  </ul>
                </li>
              </ul>
            </div>
          </details>
        </div>
        <div class="site-menu">
          <nav class="tsd-navigation">
            <a href="modules.html">@embra/reactivity - v0.0.4</a>
            <ul class="tsd-small-nested-navigation" id="tsd-nav-container">
              <li>Loading...</li>
            </ul>
          </nav>
        </div>
      </div>
    </div>
    <footer></footer>
    <div class="overlay"></div>
  </body>
</html>
